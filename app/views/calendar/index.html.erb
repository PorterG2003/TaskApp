<div>
  <!-- Header Section -->
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-gray-900">Calendar</h1>
    <% if @week_start && @week_end %>
      <div class="flex items-center space-x-2">
        <%= link_to calendar_path(date: (@week_start - 7.days).to_s), class: "text-gray-700 px-3 py-2 rounded-lg hover:bg-white/20" do %>
          <i class="fas fa-chevron-left"></i>
        <% end %>
        <span class="text-gray-700 font-medium"><%= @week_start.strftime('%b %d') %> â€“ <%= @week_end.strftime('%b %d, %Y') %></span>
        <%= link_to calendar_path(date: (@week_start + 7.days).to_s), class: "text-gray-700 px-3 py-2 rounded-lg hover:bg-white/20" do %>
          <i class="fas fa-chevron-right"></i>
        <% end %>
      </div>
    <% end %>
  </div>

  <% if @events.any? %>
    <ul class="divide-y divide-white/10">
      <% @events.each do |event| %>
        <% start_at = (event.start.date_time || event.start.date).to_time rescue nil %>
        <% end_at = (event.end.date_time || event.end.date).to_time rescue nil %>
        <%= turbo_frame_tag "calendar_event_#{event.id}" do %>
          <%= render "events/event_card",
              event: event,
              calendar_id: "primary",
              existing_task: current_user.tasks.find_by(calendar_event_id: event.id) %>
        <% end %>
      <% end %>
    </ul>
  <% else %>
    <div class="text-center py-12 text-gray-700">No events for this week.</div>
  <% end %>
</div>