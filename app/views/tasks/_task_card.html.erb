<div class="px-6 py-4 hover:bg-white/10 transition duration-150 flex items-center justify-between" data-controller="task">
  <!-- Left side: Checkbox and Task Content -->
  <div class="flex items-center flex-1">
    <!-- Completion Checkbox -->
    <%= form_with model: task, local: false, data: { action: "submit->task#toggle", turbo_method: :patch } do |form| %>
      <%= form.hidden_field :completed, value: !task.completed? %>
      <button type="submit" class="mr-4 flex items-center">
        <% if task.completed? %>
          <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center">
            <i class="fas fa-check text-gray-900"></i>
          </div>
        <% else %>
          <div class="w-6 h-6 border-2 border-gray-300 rounded-full hover:border-green-400 transition duration-150"></div>
        <% end %>
      </button>
    <% end %>

    <!-- Task Content -->
    <div class="flex-1">
      <div class="flex items-center space-x-3">
                  <div class="min-w-0 flex-1">
            <h4 class="<%= 'line-through text-gray-500' if task.completed? %> text-lg font-medium text-gray-900 truncate">
              <%= task.title %>
            </h4>
          </div>
          
          <div class="flex-shrink-0 flex items-center gap-2 ml-3">
            <!-- Priority Badge -->
            <%= render Ui::Badge.new(
              text: task.priority_label,
              variant: task.priority_color_variant,
              size: :sm
            ) %>
            
            <!-- Overdue Badge -->
            <% if task.overdue? %>
              <%= render Ui::Badge.new(
                text: "Overdue",
                variant: :danger,
                size: :sm
              ) %>
            <% end %>
          </div>
        </div>
        
        <% if task.description.present? %>
          <p class="<%= 'text-gray-400' if task.completed? %> text-gray-600 mt-1 break-words line-clamp-2"><%= task.description %></p>
        <% end %>
      
      <% if task.due_date.present? %>
        <p class="text-sm text-gray-500 mt-2 flex items-center">
          <i class="fas fa-calendar text-gray-500 mr-1 flex-shrink-0"></i>
          <span class="truncate">Due: <%= task.due_date.strftime("%B %d, %Y") %></span>
        </p>
      <% end %>
    </div>
  </div>

  <!-- Right side: Actions -->
  <div class="flex items-center space-x-2 ml-4">
    <%= link_to edit_task_path(task), class: "text-blue-600 hover:text-blue-800 p-2" do %>
              <i class="fas fa-edit text-lg"></i>
    <% end %>
    
    <%= link_to task_path(task), method: :delete, 
        confirm: "Are you sure?", 
        class: "text-red-600 hover:text-red-800 p-2",
        data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this task?" } do %>
              <i class="fas fa-trash text-lg"></i>
    <% end %>
  </div>
</div>